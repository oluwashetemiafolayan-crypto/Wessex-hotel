"use strict";(self.webpackChunkcognito_spa=self.webpackChunkcognito_spa||[]).push([["7315"],{55229:function(e,n,t){t.d(n,{C:()=>e0});var r,i=t(23045),a=t(26843),o=t(86538),u=t(90363),s=t(43825),c=t(94280),l=t(47728),f=t(27433),d=t(38754),p=t(81950),v=t(42556),m=t(88909),h=t(13561),y=t(29475),g=t(5728),_=t(13628),b=t(53763),w=t(41206),x=t(60813),I=t(17852),k=t(94146),P=t(52326),S=t(6901),T=t(83994),j="duration",C="tags",R="deviceType",A="data",U="name",M="traceID",F="length",E="stringify",O="measurements",B="dataType",D="envelopeType",Y="toString",H="onLine",V="isOnline",z="enqueue",L="count",N="eventsLimitInMem",X="push",J="emitLineDelimitedJson",q="clear",K="batchPayloads",W="markAsSent",Z="clearSent",$="bufferOverride",G="BUFFER_KEY",Q="SENT_BUFFER_KEY",ee="MAX_BUFFER_SIZE",en="namePrefix",et="maxBatchSizeInBytes",er="triggerSend",ei="diagLog",ea="onunloadDisableBeacon",eo="isBeaconApiDisabled",eu="_sender",es="_senderConfig",ec="enableSessionStorageBuffer",el="_buffer",ef="samplingPercentage",ed="instrumentationKey",ep="endpointUrl",ev="customHeaders",em="disableXhr",eh="onunloadDisableFetch",ey="disableTelemetry",eg="baseType",e_="sampleRate",eb="convertUndefined",ew="_onError",ex="_onPartialSuccess",eI="_onSuccess",ek="itemsAccepted",eP="isRetryDisabled",eS="setRequestHeader",eT="maxBatchInterval",ej="eventsSendRequest",eC="disableInstrumentationKeyValidation",eR="getSamplingScore",eA="baseType",eU="baseData",eM="properties",eF="true";function eE(e,n,t){return(0,_.sO)(e,n,t,_.fQ)}function eO(e,n,t){(0,_.le)(e)||(0,_.rW)(e,function(e,r){(0,_.hj)(r)?t[e]=r:(0,_.HD)(r)?n[e]=r:(0,b.nS)()&&(n[e]=(0,b.xA)()[E](r))})}function eB(e,n){(0,_.le)(e)||(0,_.rW)(e,function(t,r){e[t]=r||n})}function eD(e,n,t,r){var a=new S.w(e,r,n);eE(a,"sampleRate",t[o.fb]),(t[eU]||{}).startTime&&(a.time=(0,_.Y6)(t[eU].startTime)),a.iKey=t.iKey;var u=t.iKey.replace(/-/g,"");return a[U]=a[U].replace("{0}",u),!function(e,n,t){var r=t[C]=t[C]||{},a=n.ext=n.ext||{},o=n[C]=n[C]||[],u=a.user;u&&(eE(r,k.Y.userAuthUserId,u.authId),eE(r,k.Y.userId,u.id||u.localId));var s=a.app;s&&eE(r,k.Y.sessionId,s.sesId);var c=a.device;c&&(eE(r,k.Y.deviceId,c.id||c.localId),eE(r,k.Y[R],c.deviceClass),eE(r,k.Y.deviceIp,c.ip),eE(r,k.Y.deviceModel,c.model),eE(r,k.Y[R],c[R]));var l=n.ext.web;if(l){eE(r,k.Y.deviceLanguage,l.browserLang),eE(r,k.Y.deviceBrowserVersion,l.browserVer),eE(r,k.Y.deviceBrowser,l.browser);var f=t[A]=t[A]||{},d=f[eU]=f[eU]||{},p=d[eM]=d[eM]||{};eE(p,"domain",l.domain),eE(p,"isManual",l.isManual?eF:null),eE(p,"screenRes",l.screenRes),eE(p,"userConsent",l.userConsent?eF:null)}var v=a.os;v&&eE(r,k.Y.deviceOS,v[U]);var m=a.trace;m&&(eE(r,k.Y.operationParentId,m.parentID),eE(r,k.Y.operationName,(0,P.O$)(e,m[U])),eE(r,k.Y.operationId,m[M]));for(var h={},y=o[F]-1;y>=0;y--){var g=o[y];(0,_.rW)(g,function(e,n){h[e]=n}),o.splice(y,1)}(0,_.rW)(o,function(e,n){h[e]=n});var b=(0,i.uc)((0,i.uc)({},r),h);b[k.Y.internalSdkVersion]||(b[k.Y.internalSdkVersion]=(0,P.O$)(e,"javascript:".concat(eH.Version),64)),t[C]=(0,_.Ax)(b)}(e,t,a),t[C]=t[C]||[],(0,_.Ax)(a)}function eY(e,n){(0,_.le)(n[eU])&&(0,g.kP)(e,1,46,"telemetryItem.baseData cannot be null.")}var eH={Version:"2.8.18"};function eV(e,n,t){eY(e,n);var r={},i={};n[eA]!==u.j[B]&&(r.baseTypeSource=n[eA]),n[eA]===u.j[B]?(r=n[eU][eM]||{},i=n[eU][O]||{}):n[eU]&&eO(n[eU],r,i),eO(n[A],r,i),(0,_.le)(t)||eB(r,t);var a=n[eU][U],o=new u.j(e,a,r,i),s=new T.V(u.j[B],o);return eD(e,u.j[D],n,s)}function ez(e,n){(0,w.QY)(e,null,null,n)}var eL=function(){function e(n,t){var r=[],i=!1;this._get=function(){return r},this._set=function(e){return r=e},(0,a.Z)(e,this,function(e){e[z]=function(a){if(e[L]()>=t[N]()){i||((0,g.kP)(n,2,105,"Maximum in-memory buffer size reached: "+e[L](),!0),i=!0);return}r[X](a)},e[L]=function(){return r[F]},e.size=function(){for(var e=r[F],n=0;n<r[F];n++)e+=r[n][F];return t[J]()||(e+=2),e},e[q]=function(){r=[],i=!1},e.getItems=function(){return r.slice(0)},e[K]=function(e){return e&&e[F]>0?t[J]()?e.join("\n"):"["+e.join(",")+"]":null}})}return e.__ieDyn=1,e}(),eN=function(e){function n(t,r){var i=e.call(this,t,r)||this;return(0,a.Z)(n,i,function(e,n){e[W]=function(e){n[q]()},e[Z]=function(e){}}),i}return(0,i.ne)(n,e),n.__ieDyn=1,n}(eL),eX=function(e){function n(t,r){var i=e.call(this,t,r)||this,o=!1,u=r[$]()||{getItem:m.Vd,setItem:m.yp},s=u.getItem,c=u.setItem;return(0,a.Z)(n,i,function(e,i){var a=d(n[G]),u=d(n[Q]),l=e._set(a.concat(u));function f(e,n){var t=[];return(0,_.tO)(n,function(n){(0,_.mf)(n)||-1!==(0,_.UA)(e,n)||t[X](n)}),t}function d(e){var n=e;try{n=r[en]&&r[en]()?r[en]()+"_"+n:n;var i=s(t,n);if(i){var a=(0,b.xA)().parse(i);if((0,_.HD)(a)&&(a=(0,b.xA)().parse(a)),a&&(0,_.kJ)(a))return a}}catch(e){(0,g.kP)(t,1,42," storage key: "+n+", "+(0,_.jj)(e),{exception:(0,b.eU)(e)})}return[]}function p(e,n){var i=e;try{i=r[en]&&r[en]()?r[en]()+"_"+i:i;var a=JSON[E](n);c(t,i,a)}catch(e){c(t,i,JSON[E]([])),(0,g.kP)(t,2,41," storage key: "+i+", "+(0,_.jj)(e)+". Buffer cleared",{exception:(0,b.eU)(e)})}}l[F]>n[ee]&&(l[F]=n[ee]),p(n[Q],[]),p(n[G],l),e[z]=function(r){if(e[L]()>=n[ee]){o||((0,g.kP)(t,2,67,"Maximum buffer size reached: "+e[L](),!0),o=!0);return}i[z](r),p(n[G],e._get())},e[q]=function(){i[q](),p(n[G],e._get()),p(n[Q],[]),o=!1},e[W]=function(r){p(n[G],e._set(f(r,e._get())));var i=d(n[Q]);i instanceof Array&&r instanceof Array&&((i=i.concat(r))[F]>n[ee]&&((0,g.kP)(t,1,67,"Sent buffer reached its maximum size: "+i[F],!0),i[F]=n[ee]),p(n[Q],i))},e[Z]=function(e){var t=d(n[Q]);t=f(e,t),p(n[Q],t)}}),i}return(0,i.ne)(n,e),n.BUFFER_KEY="AI_buffer",n.SENT_BUFFER_KEY="AI_sentBuffer",n.MAX_BUFFER_SIZE=2e3,n}(eL),eJ=function(){function e(n){(0,a.Z)(e,this,function(e){function t(e,a){var o="__aiCircularRefCheck",u={};if(!e)return(0,g.kP)(n,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),u;if(e[o])return(0,g.kP)(n,2,50,"Circular reference detected while serializing object",{name:a},!0),u;if(!e.aiDataContract){if("measurements"===a)u=i(e,"number",a);else if("properties"===a)u=i(e,"string",a);else if("tags"===a)u=i(e,"string",a);else if((0,_.kJ)(e))u=r(e,a);else{(0,g.kP)(n,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{(0,b.xA)()[E](e),u=e}catch(e){(0,g.kP)(n,1,48,e&&(0,_.mf)(e[Y])?e[Y]():"Error serializing object",null,!0)}}return u}return e[o]=!0,(0,_.rW)(e.aiDataContract,function(i,o){var s=(0,_.mf)(o)?1&o():1&o,c=(0,_.mf)(o)?4&o():4&o,l=2&o,f=void 0!==e[i],d=(0,_.Kn)(e[i])&&null!==e[i];if(!s||f||l){if(!c){var p=void 0;void 0!==(p=d?l?r(e[i],i):t(e[i],i):e[i])&&(u[i]=p)}}else(0,g.kP)(n,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:a})}),delete e[o],u}function r(e,r){var i;if(e)if((0,_.kJ)(e)){i=[];for(var a=0;a<e[F];a++){var o=t(e[a],r+"["+a+"]");i[X](o)}}else(0,g.kP)(n,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,t,r){var i;return e&&(i={},(0,_.rW)(e,function(e,a){if("string"===t)void 0===a?i[e]="undefined":null===a?i[e]="null":a[Y]?i[e]=a[Y]():i[e]="invalid field: toString() is not defined.";else if("number"===t)if(void 0===a)i[e]="undefined";else if(null===a)i[e]="null";else{var o=parseFloat(a);isNaN(o)?i[e]="NaN":i[e]=o}else i[e]="invalid field: "+r+" is of unknown type.",(0,g.kP)(n,1,i[e],null,!0)})),i}e.serialize=function(e){var r=t(e,"root");try{return(0,b.xA)()[E](r)}catch(e){(0,g.kP)(n,1,48,e&&(0,_.mf)(e[Y])?e[Y]():"Error serializing object",null,!0)}}})}return e.__ieDyn=1,e}(),eq=t(42530),eK=function(){function e(){}return e.prototype.getHashCodeScore=function(n){return 100*(this.getHashCode(n)/e.INT_MAX_VALUE)},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[F]<8;)e=e.concat(e);for(var n=5381,t=0;t<e[F];++t)n=(n<<5)+n+e.charCodeAt(t),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=0x7fffffff,e}(),eW=function(){var e=new eK,n=new eq.n;this[eR]=function(t){return t[C]&&t[C][n.userId]?e.getHashCodeScore(t[C][n.userId]):t.ext&&t.ext.user&&t.ext.user.id?e.getHashCodeScore(t.ext.user.id):t[C]&&t[C][n.operationId]?e.getHashCodeScore(t[C][n.operationId]):t.ext&&t.ext.telemetryTrace&&t.ext.telemetryTrace[M]?e.getHashCodeScore(t.ext.telemetryTrace[M]):100*Math.random()}},eZ=function(){function e(e,n){this.INT_MAX_VALUE=0x7fffffff;var t=n||(0,g.vH)(null);(e>100||e<0)&&(t.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[e_]=e,this.samplingScoreGenerator=new eW}return e.prototype.isSampledIn=function(e){var n=this[e_];return null==n||n>=100||e.baseType===d.j[B]||this.samplingScoreGenerator[eR](e)<n},e}();function e$(e){try{return e.responseText}catch(e){}return null}function eG(){var e,n,t;return(e={endpointUrl:function(){return o.cA+o.qp}})[J]=function(){return!1},e[eT]=function(){return 15e3},e[et]=function(){return 102400},e[ey]=function(){return!1},e[ec]=function(){return!0},e[$]=function(){return!1},e[eP]=function(){return!1},e[eo]=function(){return!0},e[em]=function(){return!1},e[eh]=function(){return!1},e[ea]=function(){return!1},e[ed]=function(){return n},e[en]=function(){return n},e[ef]=function(){return 100},e[ev]=function(){return t},e[eb]=function(){return n},e[N]=function(){return 1e4},e.retryCodes=function(){return null},e}var eQ=((r={})[u.j.dataType]=eV,r[s.f.dataType]=function(e,n,t){eY(e,n);var r=n[eU].message,i=n[eU].severityLevel,a=n[eU][eM]||{},o=n[eU][O]||{};eO(n[A],a,o),(0,_.le)(t)||eB(a,t);var u=new s.f(e,r,i,a,o),c=new T.V(s.f[B],u);return eD(e,s.f[D],n,c)},r[c.B.dataType]=function(e,n,t){eY(e,n);var r,i,a=n[eU];(0,_.le)(a)||(0,_.le)(a[eM])||(0,_.le)(a[eM][j])?(0,_.le)(n[A])||(0,_.le)(n[A][j])||(r=n[A][j],delete n[A][j]):(r=a[eM][j],delete a[eM][j]);var o=n[eU];((n.ext||{}).trace||{})[M]&&(i=n.ext.trace[M]);var u=o.id||i,s=o[U],l=o.uri,f=o[eM]||{},d=o[O]||{};if((0,_.le)(o.refUri)||(f.refUri=o.refUri),(0,_.le)(o.pageType)||(f.pageType=o.pageType),(0,_.le)(o.isLoggedIn)||(f.isLoggedIn=o.isLoggedIn[Y]()),!(0,_.le)(o[eM])){var p=o[eM];(0,_.rW)(p,function(e,n){f[e]=n})}eO(n[A],f,d),(0,_.le)(t)||eB(f,t);var v=new c.B(e,s,l,r,f,d,u),m=new T.V(c.B[B],v);return eD(e,c.B[D],n,m)},r[l.y.dataType]=function(e,n,t){eY(e,n);var r=n[eU],i=r[U],a=r.uri||r.url,o=r[eM]||{},u=r[O]||{};eO(n[A],o,u),(0,_.le)(t)||eB(o,t);var s=new l.y(e,i,a,void 0,o,u,r),c=new T.V(l.y[B],s);return eD(e,l.y[D],n,c)},r[f.Pp.dataType]=function(e,n,t){eY(e,n);var r=n[eU][O]||{},i=n[eU][eM]||{};eO(n[A],i,r),(0,_.le)(t)||eB(i,t);var a=n[eU],o=f.Pp.CreateFromInterface(e,a,i,r),u=new T.V(f.Pp[B],o);return eD(e,f.Pp[D],n,u)},r[d.j.dataType]=function(e,n,t){eY(e,n);var r=n[eU],i=r[eM]||{},a=r[O]||{};eO(n[A],i,a),(0,_.le)(t)||eB(i,t);var o=new d.j(e,r[U],r.average,r.sampleCount,r.min,r.max,r.stdDev,i,a),u=new T.V(d.j[B],o);return eD(e,d.j[D],n,u)},r[p.H.dataType]=function(e,n,t){eY(e,n);var r=n[eU][O]||{},i=n[eU][eM]||{};eO(n[A],i,r),(0,_.le)(t)||eB(i,t);var a=n[eU];if((0,_.le)(a))return(0,g.jV)(e,"Invalid input for dependency data"),null;var u=a[eM]&&a[eM][o.w$]?a[eM][o.w$]:"GET",s=new p.H(e,a.id,a.target,a[U],a[j],a.success,a.responseCode,u,a.type,a.correlationContext,i,r),c=new T.V(p.H[B],s);return eD(e,p.H[D],n,c)},r),e0=function(e){function n(){var t,r,i,u,s,c,l,f,d,p,I,k=e.call(this)||this;k.priority=1001,k.identifier=v.TC,k._senderConfig=eG();var P=0;return(0,a.Z)(n,k,function(e,a){function v(n,r,i,a,o,u){var s=null;if(!e._appId&&(s=O(u))&&s.appId&&(e._appId=s.appId),(n<200||n>=300)&&0!==n){if((301===n||307===n||308===n)&&!S(i))return void e[ew](r,o);!e[es][eP]()&&N(n)?(B(r),(0,g.kP)(e[ei](),2,40,". Response code "+n+". Will retry to send "+r[F]+" items.")):e[ew](r,o)}else p&&!p[V]()?e[es][eP]()||(B(r,10),(0,g.kP)(e[ei](),2,40,". Offline - Response Code: ".concat(n,". Offline status: ").concat(!p.isOnline(),". Will retry to send ").concat(r.length," items."))):(S(i),206===n?(s||(s=O(u)),s&&!e[es][eP]()?e[ex](r,s):e[ew](r,o)):(t=0,e[eI](r,a)))}function S(n){return!(c>=10)&&!(0,_.le)(n)&&""!==n&&n!==e[es][ep]()&&(e[es][ep]=function(){return n},++c,!0)}function T(e,n){d?d(e,!1):R(e,n)}function j(n){var t=(0,b.jW)(),r=e[el],i=e[es][ep](),a=new Blob([e._buffer[K](n)],{type:"text/plain;charset=UTF-8"}),o=t.sendBeacon(i,a);return o&&(r[W](n),e._onSuccess(n,n[F])),o}function R(n,t){if((0,_.kJ)(n)&&n[F]>0&&!j(n)){for(var r=[],i=0;i<n[F];i++){var a=n[i];j([a])||r[X](a)}r[F]>0&&(f&&f(r,!0),(0,g.kP)(e[ei](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function A(n,t){var r=new XMLHttpRequest,i=e[es][ep]();try{r[o.tP]=!0}catch(e){}r.open("POST",i,t),r[eS]("Content-type","application/json"),(0,h.EX)(i)&&r[eS](y.C["6"],y.C["7"]),(0,_.tO)((0,_.FY)(l),function(e){r[eS](e,l[e])}),r.onreadystatechange=function(){return e._xhrReadyStateChange(r,n,n[F])},r.onerror=function(t){return e[ew](n,J(r),t)};var a=e._buffer[K](n);r.send(a),e._buffer[W](n)}function U(n,t){if((0,_.kJ)(n)){for(var r=n[F],i=0;i<n[F];i++)r+=n[i][F];P+r<=65e3?E(n,!1):(0,b.MF)()?R(n,t):(f&&f(n,!0),(0,g.kP)(e[ei](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function M(e,n){E(e,!0)}function E(n,t){var r,i=e[es][ep](),a=e._buffer[K](n),u=new Blob([a],{type:"application/json"}),s=new Headers,c=a[F],f=!1,d=!1;(0,h.EX)(i)&&s.append(y.C["6"],y.C["7"]),(0,_.tO)((0,_.FY)(l),function(e){s.append(e,l[e])});var p=((r={method:"POST",headers:s,body:u})[o.tP]=!0,r);t||(p.keepalive=!0,f=!0,P+=c);var m=new Request(i,p);try{m[o.tP]=!0}catch(e){}e._buffer[W](n);try{fetch(m).then(function(r){t||(P-=c,c=0),d||(d=!0,r.ok?r.text().then(function(e){v(r.status,n,r.url,n[F],r.statusText,e)}):e[ew](n,r.statusText))}).catch(function(r){t||(P-=c,c=0),d||(d=!0,e[ew](n,r.message))})}catch(t){d||e[ew](n,(0,b.eU)(t))}f&&!d&&(d=!0,e._onSuccess(n,n[F]))}function O(n){try{if(n&&""!==n){var t=(0,b.xA)().parse(n);if(t&&t.itemsReceived&&t.itemsReceived>=t[ek]&&t.itemsReceived-t.itemsAccepted===t.errors[F])return t}}catch(t){(0,g.kP)(e[ei](),1,43,"Cannot parse the response. "+(0,_.jj)(t),{response:n})}return null}function B(n,i){if(void 0===i&&(i=1),n&&0!==n[F]){var a=e[el];a[Z](n),t++;for(var o=0;o<n.length;o++){var u=n[o];a[z](u)}(function(e){var n;if(t<=1)n=10;else{var i=Math.floor((Math.pow(2,t)-1)/2*Math.random()*10)+1;i*=e,n=Math.max(Math.min(i,3600),10)}r=(0,_.m6)()+1e3*n})(i),D()}}function D(){if(!u&&!i){var n=r?Math.max(0,r-(0,_.m6)()):0;u=setTimeout(function(){u=null,e[er](!0,null,1)},Math.max(e[es][eT](),n))}}function Y(){clearTimeout(u),u=null,r=null}function N(e){return(0,_.le)(I)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:I[F]&&(0,_.UA)(I,e)>-1}function J(e,n){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+e$(e)||e.response||"":n}function G(n,t){var r=e[el],i=(0,b.Jj)(),a=new XDomainRequest;a.onload=function(){return e._xdrOnLoad(a,n)},a.onerror=function(t){return e[ew](n,Q(a),t)};var o=i&&i.location&&i.location.protocol||"";if(0!==e[es][ep]().lastIndexOf(o,0)){(0,g.kP)(e[ei](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),r[q]();return}var u=e[es][ep]().replace(/^(https?:)/,"");a.open("POST",u);var s=r[K](n);a.send(s),r[W](n)}function Q(e,n){return e?"XDomainRequest,Response:"+e$(e):n}function ee(){e[eu]=null,e[el]=null,e._appId=null,e._sample=null,l={},p=null,t=0,r=null,i=!1,u=null,s=null,c=0,P=0,f=null,d=null}ee(),e.pause=function(){Y(),i=!0},e.resume=function(){i&&(i=!1,r=null,e._buffer.size()>e._senderConfig[et]()&&e[er](!0,null,10),D())},e.flush=function(n,t,r){if(void 0===n&&(n=!0),!i){Y();try{e[er](n,null,r||1)}catch(n){(0,g.kP)(e[ei](),1,22,"flush failed, telemetry will not be collected: "+(0,_.jj)(n),{exception:(0,b.eU)(n)})}}},e.onunloadFlush=function(){if(!i)if((!1===e._senderConfig[ea]()||!1===e[es][eo]())&&(0,b.MF)())try{e[er](!0,T,2)}catch(n){(0,g.kP)(e[ei](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,_.jj)(n),{exception:(0,b.eU)(n)})}else e.flush()},e.addHeader=function(e,n){l[e]=n},e.initialize=function(n,i,o,u){e.isInitialized()&&(0,g.kP)(e[ei](),1,28,"Sender is already initialized"),a.initialize(n,i,o,u);var l,v=e._getTelCtx(),y=e.identifier;s=new eJ(i.logger),t=0,r=null,e[eu]=null,c=0;var P=e[ei]();p=function(e){var n,t=(0,b.Me)(),r=(0,b.jW)(),i=!1,a=!0,o=(0,w.jU)((0,x.J)("OfflineListener"),e);try{if(s((0,b.Jj)())&&(i=!0),t){var u=t.body||t;u.ononline&&s(u)&&(i=!0)}i&&r&&!(0,_.le)(r[H])&&(a=r[H])}catch(e){i=!1}function s(e){var n=!1;return e&&(n=(0,w.XO)(e,"online",c,o))&&(0,w.XO)(e,"offline",l,o),n}function c(){a=!0}function l(){a=!1}return(n={})[V]=function(){var e=!0;return i?e=a:r&&!(0,_.le)(r[H])&&(e=r[H]),e},n.isListening=function(){return i},n.unload=function(){var e=(0,b.Jj)();if(e&&i){if(ez(e,o),t){var n=t.body||t;(0,_.o8)(n.ononline)||ez(n,o)}i=!1}},n}((0,w.jU)((0,x.J)("Sender"),i.evtNamespace&&i.evtNamespace()));var S=eG();(0,_.rW)(S,function(n,t){e[es][n]=function(){var e=v.getConfig(y,n,t());return e||"endpointUrl"!==n||(e=t()),e}}),I=e[es].retryCodes(),n.storagePrefix&&(0,m.mh)(n.storagePrefix);var T=e[es][ec]()&&!!(e._senderConfig[$]()||(0,m.D3)());e[el]=T?new eX(P,e[es]):new eN(P,e[es]),e._sample=new eZ(e[es][ef](),P),l=n,!(0,_.le)(l[eC])&&l[eC]||RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(l[ed])||(0,g.kP)(P,1,100,"Invalid Instrumentation key "+n[ed]),!(0,h.EX)(e._senderConfig.endpointUrl())&&e._senderConfig.customHeaders()&&e._senderConfig.customHeaders()[F]>0&&(0,_.tO)(e[es][ev](),function(e){k.addHeader(e.header,e.value)});var j=e[es],C=null;!j[em]()&&(0,b.cp)()?C=G:!j[em]()&&(0,b.Z3)()&&(C=A),!C&&(0,b.JO)()&&(C=M),f=C||A,!j[eo]()&&(0,b.MF)()&&(C=R),e[eu]=C||A,d=!j[eh]()&&(0,b.JO)(!0)?U:(0,b.MF)()?R:!j[em]()&&(0,b.cp)()?G:!j[em]()&&(0,b.Z3)()?A:f},e.processTelemetry=function(t,r){var i=(r=e._getTelCtx(r))[ei]();try{if(e[es][ey]())return;if(!t)return void(0,g.kP)(i,1,7,"Cannot send empty telemetry");if(t.baseData&&!t[eg])return void(0,g.kP)(i,1,70,"Cannot send telemetry without baseData and baseType");if(t[eg]||(t[eg]="EventData"),!e[eu])return void(0,g.kP)(i,1,28,"Sender was not initialized");if(a=t,!e._sample.isSampledIn(a))return void(0,g.kP)(i,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[e_]});t[o.fb]=e._sample[e_];var a,u=e[es][eb]()||void 0,c=t.iKey||e[es][ed](),l=n.constructEnvelope(t,c,i,u);if(!l)return void(0,g.kP)(i,1,47,"Unable to create an AppInsights envelope");var f=!1;if(t[C]&&t[C][o.cV]&&((0,_.tO)(t[C][o.cV],function(e){try{e&&!1===e(l)&&(f=!0,(0,g.jV)(i,"Telemetry processor check returns false"))}catch(e){(0,g.kP)(i,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,_.jj)(e),{exception:(0,b.eU)(e)},!0)}}),delete t[C][o.cV]),f)return;var d=s.serialize(l),v=e[el];v.size()+d[F]>e[es][et]()&&(!p||p[V]())&&e[er](!0,null,10),v[z](d),D()}catch(e){(0,g.kP)(i,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,_.jj)(e),{exception:(0,b.eU)(e)})}e.processNext(t,r)},e._xhrReadyStateChange=function(e,n,t){4===e.readyState&&v(e.status,n,e.responseURL,t,J(e),e$(e)||e.response)},e[er]=function(n,t,r){if(void 0===n&&(n=!0),!i)try{var a=e[el];if(e[es][ey]())a[q]();else if(a[L]()>0){var o=a.getItems();(function(n,t){var r,i=(r="getNotifyMgr",e.core[r]?e.core[r]():e.core._notificationManager);if(i&&i[ej])try{i[ej](n,t)}catch(n){(0,g.kP)(e[ei](),1,74,"send request notification failed: "+(0,_.jj)(n),{exception:(0,b.eU)(n)})}})(r||0,n),t?t.call(e,o,n):e[eu](o,n)}Y()}catch(n){var u=(0,b.sA)();(!u||u>9)&&(0,g.kP)(e[ei](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,_.jj)(n),{exception:(0,b.eU)(n)})}},e._doTeardown=function(n,t){e.onunloadFlush(),p.unload(),ee()},e[ew]=function(n,t,r){(0,g.kP)(e[ei](),2,26,"Failed to send telemetry.",{message:t}),e._buffer&&e._buffer[Z](n)},e[ex]=function(n,t){for(var r=[],i=[],a=t.errors.reverse(),o=0;o<a.length;o++){var u=a[o],s=n.splice(u.index,1)[0];N(u.statusCode)?i[X](s):r[X](s)}n[F]>0&&e[eI](n,t[ek]),r[F]>0&&e[ew](r,J(null,["partial success",t[ek],"of",t.itemsReceived].join(" "))),i[F]>0&&(B(i),(0,g.kP)(e[ei](),2,40,"Partial success. Delivered: "+n[F]+", Failed: "+r[F]+". Will retry to send "+i[F]+" our of "+t.itemsReceived+" items"))},e[eI]=function(n,t){e._buffer&&e._buffer[Z](n)},e._xdrOnLoad=function(n,r){var i=e$(n);if(n&&(i+""=="200"||""===i))t=0,e[eI](r,0);else{var a=O(i);a&&a.itemsReceived&&a.itemsReceived>a[ek]&&!e[es][eP]()?e[ex](r,a):e[ew](r,Q(n))}}}),k}return(0,i.ne)(n,e),n.constructEnvelope=function(e,n,t,r){var a=n===e.iKey||(0,_.le)(n)?e:(0,i.uc)((0,i.uc)({},e),{iKey:n});return(eQ[a.baseType]||eV)(t,a,r)},n}(I.i)}}]);
//# sourceMappingURL=npm.microsoft+applicationinsights-channel-js@2.8.18_tslib@2.8.1.19e3d97e40bf08b2.js.map